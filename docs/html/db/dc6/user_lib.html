<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Thread Synch AOSV 2020: User Level Library</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Thread Synch AOSV 2020
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">LKM for exchanging messages between threads</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">User Level Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>At user-space level, interaction with the kernel device file is done through two types of structures:</p><ul>
<li><a class="el" href="../../d9/dbf/structT__THREAD__SYNCH.html">thread_synch_t</a>: handles request to the main synch device file</li>
<li><a class="el" href="../../db/d82/structT__THREAD__GROUP.html">thread_group_t</a>: handles request to a group device file</li>
</ul>
<p>First of all, an application has to initialize a <a class="el" href="../../d9/dbf/structT__THREAD__SYNCH.html">thread_synch_t</a> structure via <a class="el" href="../../d5/d20/thread__synch_8h.html#a0b9a508c4355883d84619d4472c4e0a3" title="Initialize a &#39;thread_synch_t&#39; structure.">initThreadSyncher()</a> in order to interact with the module’s functionalities. At some point the user-level app execution the module’s group can be accessed by obtaining a <a class="el" href="../../db/d82/structT__THREAD__GROUP.html">thread_group_t</a> structure, and this can be done in three ways:</p><ul>
<li><a class="el" href="../../d2/dac/main__device_8h.html#a67f3d637fdb8834a96bee2141c523458" title="Install a group for the provided &#39;group_t&#39; descriptor.">installGroup()</a>: Installs a group given a group descriptor (<a class="el" href="../../d2/dc2/structgroup__t.html" title="System-wide descriptor of a group.">group_t</a>)</li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a0c92afb57aeb28ee3ab2f4b3d944346d" title="Load a group&#39;s structure given a group descriptor.">loadGroupFromDescriptor()</a>: loads a thread_group_t structure relative to the group identified by the provided ‘group_t’ descriptor.</li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a785bcde5f08439e91a2c6828bbf5d83d" title="Load a group structure given a group ID.">loadGroupFromID()</a>: loads a thread_group_t structure relative to the group identified by the provided ID.</li>
</ul>
<p>Each one of these functions return a pointer to an initialized thread_group_t structure (or NULL in case of error) and, with the exception of the last one, they need a thread_synch_t structure as parameter. To correctly use the module subsystems, user-level applications have to open groups in order to become active members of them via the function <a class="el" href="../../d5/d20/thread__synch_8h.html#a6f4b8c5c4cd71b55b693b19477192042" title="Open a group, the thread PID is added to group&#39;s active members.">openGroup()</a>. In case the library's functions are called with a closed thread_group_t structure as a parameter they will return the error value “GROUP_CLOSED”.</p>
<h1><a class="anchor" id="msg_subsystem_user"></a>
Message Subsystem</h1>
<p>The following functions allows to read/write a message on an existing group (specified via the thread_group_t parameter):</p><ul>
<li><a class="el" href="../../d2/d0d/message_8h.html#af0eb4f46db2a45d736b02c2ac731fdba" title="Read a message from the corresponding queue.">readMessage()</a></li>
<li><a class="el" href="../../d2/d0d/message_8h.html#a1ba93a9118165a7e11a1b0865f78da85" title="write message on a group queue">writeMessage()</a></li>
</ul>
<p>Instead, in order to manage message’s delay, these two functions are available:</p><ul>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a40e17edd747a94c9c1a9c97c014e03d9" title="Set the delay value for a given group.">setDelay()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a2ec2da5085c32cbab0f0025c62d6a402" title="Revoke all the delayed messaged on a given group and deliver it.">revokeDelay()</a></li>
</ul>
<h1><a class="anchor" id="synch_subsystem_user"></a>
Synchronization Subsystem</h1>
<p>The whole synchronization subsystem at user-level is managed only through two function: the first one put the calling threads on sleep (the thread is descheduled) while the second one awake all the threads of the same group that went on sleep (they are rescheduled)</p><ul>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a30aa9ea940e7e4a48ddc23000ad0abe9" title="Put the process which call this function on sleep.">sleepOnBarrier()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#afb024938d9cf0b8161752345ef3f65cf" title="Awake all the process present in a wait queue for a given group.">awakeBarrier()</a></li>
</ul>
<h1><a class="anchor" id="security_user"></a>
Security</h1>
<p>The following lists of functions are the one that allows to manage the security configurations of a group. The first pair respectively enable/disable the strict mode of a given group. The last two functions are instead used to change the owner of a specified group: the first one accepts an UID as parameter as set it as the new owner while the other one set the UID of the current thread as the owner. Recall that if ‘strict mode’ is enabled only the owner of the group can disable it and/or change the group’s owner.</p>
<ul>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#af75a6962ec9fa6327d67c2a03dd98bf8" title="Enable strict mode on a group.">enableStrictMode()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a5c0bf0d0eb98dec88c8c60e576b05ea1" title="Disable strict mode on a group.">disableStrictMode()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a8738d08f53957d4861f5201abb6ca146" title="Change the owner of a group.">changeOwner()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#aefdb2522256f335e20f44142c011efa2" title="Change the owner of a group to the calling thread&#39;s UID.">becomeOwner()</a></li>
</ul>
<h1><a class="anchor" id="param_user"></a>
Parameter Configuration</h1>
<p>The functions below are instead used to get/set a group’s parameters. Recall that if ‘strict mode’ is enabled only the owner can set a new value for a parameter. At low-level these functions interact with the sysfs entries of the specified group.</p><ul>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a6417dc6922a5ea23f0c32186976f2639" title="Get the maximum message size value for a given group.">getMaxMessageSize()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#adee40526996678c8f9eaf459c2687083" title="Get the maximum storage size value for a given group.">getMaxStorageSize()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#af047c2dd764df71c248cb161f1d1cec4" title="Get the current storage size value for a given group.">getCurrentStorageSize()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a34cb66021b147dbcac0d1e1c3da2c3ba" title="Set the maximum message size value for a given group.">setMaxMessageSize()</a> <br  />
</li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#a49b2ad5effe07c0325a8534a4f3364a4" title="Set the maximum storage size value for a given group.">setMaxStorageSize()</a></li>
<li><a class="el" href="../../d5/d20/thread__synch_8h.html#aba1f7570253ade80a90308b3974d3e12" title="Set the garbage collector ratio value for a given group.">setGarbageCollectorRatio()</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
